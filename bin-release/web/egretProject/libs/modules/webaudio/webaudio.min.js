function playEnterSound(e,o,n){if(window.playsound!==!1){var t;t=o===!1?!1:o.length>0&&void 0!==o[0]?o[0]:!0,void 0==n&&(n=!0),soundLoadAutoPlay=n,soundIsMute=!t,0==soundIsActive&&activeSound(),window.bg_mp3||(window.bg_mp3=window.mvSoundMgr.addSoundSource({url:e,preLoad:!0,loop:!0,multishot:!1,callback:loadBgComplete}))}}function activeSound(){if(soundIsActive=!0,console.log("激活音乐"),console.log("jWebAudio versions:"+jwv),!window.OMG||!window.OMG.config)if(window.MW_CONFIG&&window.MW_CONFIG.end_screen_info&&288==window.MW_CONFIG.end_screen_info.ad_type)window.mvSoundMgr.dingSound&&window.mvSoundMgr.dingSound.sound&&(console.log("触发型音效成功播放"),window.mvSoundMgr.dingSound.sound.play(),window.mvSoundMgr.dingSound.sound.setVolume(10));else{var e=jWebAudio.context.createBuffer(1,1,44100),o=jWebAudio.context.createBufferSource();if(o.buffer=e,o.connect(jWebAudio.context.destination),o.start(0),jWebAudio.context.sampleRate<4e5){jWebAudio.context.close(),window.hasOwnProperty("AudioContext")?jWebAudio.context=new AudioContext:window.hasOwnProperty("webkitAudioContext")?jWebAudio.context=new webkitAudioContext:(jWebAudio.context=null,console.error("Web audio is not supported in current web browser. Please try with the latest Chrome."));var e=jWebAudio.context.createBuffer(1,1,44100),o=jWebAudio.context.createBufferSource();o.buffer=e,o.connect(jWebAudio.context.destination),o.start(0),document.addEventListener("touchend",function(){var e=jWebAudio.context.createBuffer(1,1,44100),o=jWebAudio.context.createBufferSource();o.buffer=e,o.connect(jWebAudio.context.destination),o.start(0)},!0)}}}function changeBgMusic(e){window.playsound===!1||soundIsMute||(window.bg_mp3&&window.bg_mp3.sound&&(window.bg_mp3.sound.stop(),window.bg_mp3=null),window.bg_mp3=window.mvSoundMgr.addSoundSource({url:e,preLoad:!0,loop:!0,multishot:!1,callback:function(){window.bg_mp3&&window.bg_mp3.sound&&window.bg_mp3.sound.play()}}))}function playSoundEff(e,o){if(window.playsound!==!1&&!soundIsMute&&!window.soundIsPause){void 0==o&&(o=1);var n=e.split("/"),t=n[n.length-1];t=t.replace(".","_"),null==window[t]?window[t]=window.mvSoundMgr.addSoundSource({url:e,preLoad:!0,loop:!1,multishot:1==o,playtime:o,callback:function(){window[t].sound.play()}}):window[t].sound?(window[t].sound.playtime=o,window[t].sound.play()):console.log(t+"还在处理中")}}function stopSoundEff(e){if(window.playsound!==!1&&!soundIsMute){var o=e.split("/"),n=o[o.length-1];n=n.replace(".","_"),null!=window[n]&&(0==window[n].isLoaded&&(window[n].callback=null,window[n].options.callback=null),window[n].sound&&(window[n].sound.playtime=1,window[n].sound.stop()))}}function loadBgComplete(){soundIsMute?document.addEventListener("touchend",function(){console.log("点击了 播放音乐"),soundIsMute=!1,window.bg_mp3&&window.bg_mp3.sound.play()},!0):soundLoadAutoPlay&&window.bg_mp3&&window.bg_mp3.sound&&window.bg_mp3.sound.play(),registerListener()}function stopBgSound(){return window.bg_mp3&&window.bg_mp3.sound?(window.bg_mp3.sound.stop(),window.bg_mp3.sound.endTime):void 0}function playBgSound(e){var e=void 0==e?0:e;soundLoadAutoPlay=!0,window.bg_mp3&&window.bg_mp3.sound&&window.bg_mp3.sound.play(e)}function registerListener(){var e=function(){var e=window.navigator.userAgent;return{isAndroid:-1<e.indexOf("Android")||-1<e.indexOf("Adr"),isiOS:!!e.match(/\(i[^;]+;( U;)? CPU.+Mac OS X/)}},o=function(){if(window.OMG&&OMG.config&&"chartboost"===OMG.config.adx&&e().isiOS){if(webIsActivate)return;webIsActivate=!0,recoveryAllSound()}else{if(!webIsActivate)return;webIsActivate=!1,stopAllSound()}},n=function(){if(window.OMG&&OMG.config&&"chartboost"===OMG.config.adx&&e().isiOS){if(!webIsActivate)return;webIsActivate=!1,stopAllSound()}else{if(webIsActivate)return;webIsActivate=!0,recoveryAllSound()}},t=function(){document[i]?o():n()};window.addEventListener("focus",n,!1),window.addEventListener("blur",o,!1);var i,q;"undefined"!=typeof document.hidden?(i="hidden",q="visibilitychange"):"undefined"!=typeof document.mozHidden?(i="mozHidden",q="mozvisibilitychange"):"undefined"!=typeof document.msHidden?(i="msHidden",q="msvisibilitychange"):"undefined"!=typeof document.webkitHidden?(i="webkitHidden",q="webkitvisibilitychange"):"undefined"!=typeof document.oHidden&&(i="oHidden",q="ovisibilitychange"),"onpageshow"in window&&"onpagehide"in window&&(window.addEventListener("pageshow",n,!1),window.addEventListener("pagehide",o,!1)),i&&q&&document.addEventListener(q,t,!1)}function stopAllSound(){soundIsPause=!0;for(var e=window.mvSoundMgr,o=0;o<e.soundArray.length;o++){var n=e.soundArray[o].sound;n&&n.setVolume(0)}}function recoveryAllSound(){soundIsPause=!1;for(var e=window.mvSoundMgr,o=0;o<e.soundArray.length;o++){var n=e.soundArray[o].sound;n&&n.setVolume(n.defaultVolume?n.defaultVolume:100)}}function destorySound(){window.bg_mp3&&(window.bg_mp3.sound.stop(),window.bg_mp3=null)}var jwv="2.3.0",jWebAudio=function(){window.hasOwnProperty("AudioContext")?this.context=new AudioContext:window.hasOwnProperty("webkitAudioContext")?this.context=new webkitAudioContext:(this.context=null,console.error("Web audio is not supported in current web browser. Please try with the latest Chrome."))};jWebAudio=new jWebAudio;var triggerSoundStr="";jWebAudio.SoundEngine=function(){console.log("SoundEngine"),this.soundArray=[],triggerSoundStr="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",window.MW_CONFIG&&(this.dingSound=this.addSoundSource({data:triggerSoundStr,preLoad:!0,loop:!1,multishot:!0,playtime:1}))},jWebAudio.SoundEngine.prototype={addSoundSource:function(e){if("object"!=typeof e||!e.hasOwnProperty("url")&&!e.hasOwnProperty("data"))return console.error("Error url in addSoundSource."),void 0;if(e.preLoad!==!0&&(e.preLoad=!1),"function"!=typeof e.callback&&"object"!=typeof e.callback&&(e.callback=null),e.multishot!==!0&&(e.multishot=!1),void 0==e.playtime&&(e.playtime=-1),"string"==typeof e.url){if(window.assetsPackage){var o=e.url.split("/"),n=o[o.length-1];n=n.replace(".","_"),e.data=window.assetsPackage[n]}return this.soundArray.push(new jWebAudio.SoundSource(this.soundArray.length,e)),this.soundArray[this.soundArray.length-1]}if("string"==typeof e.data)return this.soundArray.push(new jWebAudio.SoundSource(this.soundArray.length,e)),this.soundArray[this.soundArray.length-1];if("object"==typeof e.url){if(e.preLoad){var t=e.url.length,i=0,q=e.callback;e.callback=function(){++i,i===t&&q&&q()}}var u=this.soundArray.length,d=e.url.slice();for(var A in e.url)e.url=d[A],this.soundArray.push(new jWebAudio.SoundSource(this.soundArray.length,e));for(var r=[],A=u;A<this.soundArray.length;++A)r[A-u]=this.soundArray[A];return r}},destroySound:function(e){this.soundArray[e]&&(this.soundArray[e].isLoaded&&this.soundArray[e].stop(),delete this.soundArray[e])}},jWebAudio.SoundSource=function(e,o){this.id=o.id,this.url=o.url,this.multishot=o.multishot,this.isLoaded=!1,this.options=o,this.finish=o.finish,this.playtime=o.playtime;this.sound=null,o.preLoad===!0&&this.load(o.callback)},jWebAudio.SoundSource.prototype.load=function(){if(!this.isLoaded)if(this.options.data){var e=basedecode(this.options.data),o=this;jWebAudio.context.decodeAudioData(e,function(e){return o.sound=o.multishot?new jWebAudio.WebAudioMultishotSound(e):new jWebAudio.WebAudioSound(e,o.finish),o.sound.options=o.options,o.isLoaded=!0,o.options.callback&&o.options.callback(),!0},function(){return console.error("Cannot decode: "+o.url),!1})}else{var n=new XMLHttpRequest;n.open("GET",this.url,!0),n.responseType="arraybuffer";var o=this;n.onload=function(){var e=n.response;jWebAudio.context.decodeAudioData(e,function(e){return o.sound=o.multishot?new jWebAudio.WebAudioMultishotSound(e):new jWebAudio.WebAudioSound(e,o.finish),o.sound.options=o.options,o.isLoaded=!0,o.options.callback&&o.options.callback(),!0},function(){return console.error("Cannot decode: "+o.url),!1})},n.onerror=function(){console.error("Load error")},n.send()}};var basedecode=function(e){for(var o="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",n=new Uint8Array(256),t=0;t<o.length;t++)n[o.charCodeAt(t)]=t;var i=.75*e.length,q=e.length,u=0,d=0,A=0,r=0,s=0;"="===e[e.length-1]&&(i--,"="===e[e.length-2]&&i--);for(var a=new ArrayBuffer(i),c=new Uint8Array(a),t=0;q>t;t+=4)d=n[e.charCodeAt(t)],A=n[e.charCodeAt(t+1)],r=n[e.charCodeAt(t+2)],s=n[e.charCodeAt(t+3)],c[u++]=d<<2|A>>4,c[u++]=(15&A)<<4|r>>2,c[u++]=(3&r)<<6|63&s;return a};jWebAudio.extend=function(e,o){var n=function(){};n.prototype=o.prototype,e.prototype=new n,e.prototype.constructor=e},jWebAudio.leftMerge=function(e,o){for(var n in o)e.hasOwnProperty(n)&&("object"==typeof e[n]?"object"==typeof o[n]&&leftMerge(e[n],o[n]):e[n]=o[n])},jWebAudio.Sound=function(){function e(){for(var e=0;e<A.length;++e)if(void 0!==A[e])return A[e];return null}function o(){for(var e=A.length-1;e>=0;--e)if(void 0!==A[e])return A[e];return null}this.STOPPED=0,this.PLAYING=1,this.PAUSED=2;var n=3,t=3,i=this,q={loop:!1,loopGap:0,muted:!1,volume:100,fadeIn:!1,fadeOut:!1,fadeInTime:n,fadeOutTime:t};this.getOptions=function(){return q},this.__defineGetter__("options",this.getOptions),this.setOptions=function(e){e&&("boolean"==typeof e.muted&&e.muted!==q.muted&&i.setMuted(e.muted),"number"==typeof e.volume&&e.volume!==q.volume&&i.setVolume(e.volume),"boolean"==typeof e.fadeIn&&(q.fadeIn=e.fadeIn,i.setFadeIn(q.fadeIn,e.fadeInTime)),"boolean"==typeof e.fadeOut&&(q.fadeOut=e.fadeOut,i.setFadeOut(q.fadeOut,e.fadeOutTime)),i.playtime=e.playtime,jWebAudio.leftMerge(q,e))},this.__defineSetter__("options",this.setOptions),this.setMuted=function(e){return"boolean"!=typeof e?(console.error("Error type of mute!"),void 0):(q.muted=e,d.gain.value=e?0:q.volume/100,void 0)},this.getMuted=function(){return i.options.muted},this.setVolume=function(e){return e=+e,isNaN(e)?(console.error("Error type of volume in setVolume"),void 0):(0!=e&&(this.defaultVolume=e),q.volume=e,d.gain.value=e/100,void 0)},this.getVolume=function(){return i.options.volume},this.getLoop=function(){return i.options.loop};var u=jWebAudio.context,d=u.createGain();this.__defineGetter__("gain",function(){return d});var A=[],r=[];this.addEffect=function(n){if("string"==typeof n&&(n=new jWebAudio.Effect(n)),!(n instanceof jWebAudio.Effect))return console.error("Error in addEffect: effect is not instance of Effect"),void 0;var t=e(),i=o();return null!==t?(i.outNode.disconnect(),i.outNode.connect(n.inNode)):(d.disconnect(),d.connect(n.inNode)),n.outNode.connect(u.destination),A.push(n),r.push(n.getName()),A.length-1},this.getEffectNames=function(){return r},this.getEffect=function(e){return A[e]},this.deleteEffect=function(e){if(void 0!==A[e]){for(var o=null,n=e-1;n>=0;--n)if(void 0!==A[n]){o=A[n].outNode;break}for(var t=u.destination,n=e+1;n<A.length;++n)if(void 0!==A[n]){t=A[n].inNode;break}null===o?(d.disconnect(),d.connect(t)):(o.disconnect(),o.connect(t)),delete A[e],delete r[e]}},this.clearAllEffects=function(){for(var e=A.length-1;e>=0;--e)if(void 0!==A[e])return d.disconnect(),A[e].outNode.disconnect(),d.connect(u.destination),A=[],r=[],void 0},d.connect(u.destination)},jWebAudio.WebAudioSound=function(e,o){function n(e){var e=void 0==e?0:e;0!=e&&(r=e);var t=A.duration-r;d=q.createBufferSource(),d.buffer=A,d.loop=i.options.loop,d.connect(u),i.options.fadeIn&&(u.gain.setValueAtTime(u.gain.minValue,q.currentTime),u.gain.linearRampToValueAtTime(u.gain.maxValue,q.currentTime+i.options.fadeInTime)),d.start(0,r,t),s=q.currentTime,this.startTime=s,a=i.PLAYING;var p=function(){return setTimeout(function(){i.playtime--,i.options.loop===!0||0!=i.playtime?(i.seek(0),i.options.loopGap&&i.options.loopGap>0&&(i.stop(),loopGapEvent=setTimeout(function(){n()},1e3*i.options.loopGap))):(r=0,a=i.STOPPED),o&&o()},1e3*(t-.05))};if(c=p(),i.options.fadeOut===!0){var f=function(){return setTimeout(function(){u.gain.setValueAtTime(u.gain.maxValue,q.currentTime),u.gain.linearRampToValueAtTime(u.gain.minValue,q.currentTime+i.options.fadeOutTime)},1e3*(t-i.options.fadeOutTime))};l=f()}}function t(){a===i.PLAYING&&(d.stop(0),d=null,r+=q.currentTime-s,i.endTime=r,clearTimeout(c),clearTimeout(l))}jWebAudio.Sound.call(this);var i=this,q=jWebAudio.context,u=q.createGain();u.connect(i.gain);var d=null,A=e;this.__defineGetter__("duration",function(){return A.duration});var r=0;this.__defineGetter__("offset",function(){return a===i.PLAYING?q.currentTime-s+r:r}),this.seek=function(e){if("number"!=typeof e||0>e||e>A.duration)return console.error("Error arg in WebAudioSound."),void 0;var o=a,t=d;setTimeout(function(){t&&(t.stop(0),t=null)},1e3),r=e,o===this.PLAYING&&n()};var s=0;this.startTime=0;var a=this.STOPPED;this.__defineGetter__("state",function(){return a});var c=null,l=null;this.play=function(e){if(!soundIsMute&&window.playsound!==!1&&a!==i.PLAYING){var e=void 0==e?0:e;n(e)}},this.pause=function(){a===i.PLAYING&&(t(),a=i.PAUSED)},this.stop=function(){function e(){t(),r=0,a=i.STOPPED}if(a!==i.STOPPED)if(i.options.fadeOut){var o=i.options.fadeOutTime;u.gain.linearRampToValueAtTime(u.gain.minValue,q.currentTime+o),setTimeout(function(){e()},1e3*o)}else e()},this.endTime=0,this.setFadeIn=function(e,o){"boolean"==typeof e?(i.options.fadeIn=e,"number"==typeof o&&(i.options.fadeInTime=o)):(i.options.fadeOut=ifFadeOut,console.error("Error type in setFadeIn."))},this.setFadeOut=function(e,o){"boolean"==typeof e&&"number"==typeof o&&(i.options.fadeOutTime=o)}},jWebAudio.extend(jWebAudio.WebAudioSound,jWebAudio.Sound),jWebAudio.WebAudioMultishotSound=function(e){jWebAudio.Sound.call(this);var o=jWebAudio.context,n=e,t=[],i=this;this.play=function(){var e=o.createBufferSource();e.buffer=n,e.loop=this.loop,e.connect(i.gain),e.start(0,0),t.push(e)},this.stop=function(){t.forEach(function(e){e.stop(),e.disconnect()}),t=[]}},jWebAudio.extend(jWebAudio.WebAudioMultishotSound,jWebAudio.Sound),jWebAudio.Effect=function(e){return"telephonize"===e?new jWebAudio.Filter(e,[{type:jWebAudio.Filter.prototype.LOWPASS,frequency:2e3},{type:jWebAudio.Filter.prototype.HIGHPASS,frequency:500}]):"cathedral"===e?new jWebAudio.Filter(e,[{type:jWebAudio.Filter.prototype.BANDPASS,frequency:3e3},{type:jWebAudio.Filter.prototype.ALLPASS,frequency:1e3}]):"3d"===e?new jWebAudio.Spatiality:(console.error('Effect name: "'+e+'" not found'),void 0)},jWebAudio.Filter=function(e,o){var n=e;this.getName=function(){return n};var t,i,q,u,d=[],A=[];if(o instanceof Array)d=o;else{if(!(o instanceof Object))return;d.push(o)}var r=jWebAudio.context;for(t=0;t<d.length;++t)q=d[t],q.type>=0&&q.type<=7&&(u=r.createBiquadFilter(),u.type=q.type,u.frequency.value=q.frequency,u.Q.value=q.Q,u.gain.value=q.gain,A.push(u));for(t=0;t<A.length-1;++t)i=t+1,A[t].connect(A[i]);this.__defineGetter__("inNode",function(){return A[0]}),this.__defineGetter__("outNode",function(){return A[A.length-1]})},jWebAudio.extend(jWebAudio.Filter,jWebAudio.Effect),jWebAudio.Filter.prototype.LOWPASS=0,jWebAudio.Filter.prototype.HIGHPASS=1,jWebAudio.Filter.prototype.BANDPASS=2,jWebAudio.Filter.prototype.LOWSHELF=3,jWebAudio.Filter.prototype.HIGHSHELF=4,jWebAudio.Filter.prototype.PEAKING=5,jWebAudio.Filter.prototype.NOTCH=6,jWebAudio.Filter.prototype.ALLPASS=7,jWebAudio.Spatiality=function(){var e=jWebAudio.context;this.soundObject=e.createPanner();var o=this;this.__defineGetter__("inNode",function(){return o.soundObject}),this.__defineGetter__("outNode",function(){return o.soundObject})},jWebAudio.extend(jWebAudio.Spatiality,jWebAudio.Effect),jWebAudio.Spatiality.prototype.getName=function(){return"3d"};var soundIsMute=!1;window.mvSoundMgr=new jWebAudio.SoundEngine;var soundLoadAutoPlay,soundIsActive=!1,webIsActivate=!0,soundIsPause=!1;